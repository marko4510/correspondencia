<!DOCTYPE html>
<html lang="en">

<head th:replace="layout/head :: head">
</head>

<body>
  <div class="loader"></div>
  <div id="app">
    <div class="main-wrapper main-wrapper-1">

      <nav th:replace="layout/navbar :: navbar">

      </nav>

      <div th:replace="layout/sidebar :: sidebar">

      </div>

      <!-- Main Content -->
      <div th:replace="layout/content :: content">

      </div>

      <div class="modal fade " id="ModalSolitudesHojasDeRuta" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog " role="document" style="max-width: 80%; width: 1200px;">
          <div class="modal-content">
            <div class="modal-header" style="background-color: #007bff; color: white;">
              <h5 class="modal-title" id="exampleModalCenterTitle">Lista de solicitudes de Recepción de Hoja de Ruta
              </h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="card">
              <div class="card-body">
                <div id="Tabla_Solicitudes"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade bd-example-modal-lg" id="formulario_Solicitud" tabindex="-1" role="dialog"
        aria-labelledby="myLargeModalLabel" aria-hidden="true" data-backdrop="static">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="myLargeModalLabel">Formulario de Recepción de Documento</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="cargarCamposBusqueda()">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div id="Formulario_Solicitud">

            </div>
          </div>
        </div>
      </div>

      <footer th:replace="layout/footer :: footer">
      </footer>
    </div>

    <div th:replace="layout/script :: script">
    </div>
    <script>
      function CargarSolicitudes() {

          $.ajax({
            type: 'POST',
            url: "/solitudes_Pendientes",
            success: function (response) {
              $("#Tabla_Solicitudes").html(response);
            },
            error: function (xhr) {
              Swal.fire(
                'Error',
                'Ocurrió un error al procesar la solicitud.',
                'error'
              );
            }
          });
        }

      function CargarFormularioSolicitud(id_movimiento_documento) {

          $.ajax({
            type: 'POST',
            url: "/formulario_Solicitud/"+id_movimiento_documento,
            success: function (response) {
              $("#Formulario_Solicitud").html(response);
            },
            error: function (xhr) {
              Swal.fire(
                'Error',
                'Ocurrió un error al procesar la solicitud.',
                'error'
              );
            }
          });
        }

        // Función para cargar usuarios
    function cargarSelectUsuario() {
      var idUnidadDestino = $('#idUnidadDestino').val();
      $.ajax({
        type: 'POST',
        url: "/cargarSelectUsuarios/" + idUnidadDestino,
        success: function (response) {
          var selectUsuarios = $('#selectUsuarios3');
          selectUsuarios.empty();
          selectUsuarios.append($('<option>', {
            value: '',
            text: 'Seleccione una Persona...'
          }));

          $.each(response, function (index, user) {
            selectUsuarios.append($('<option>', {
              value: user[0],
              text: user[1]
            }));
          });

          // Reinicializar Select2 después de cargar las opciones
          selectUsuarios.trigger('change').select2({
            width: '100%',
            dropdownParent: $('#formulario_Solicitud')
          });
        },
        error: function (xhr, status, error) {
          console.error('Hubo un problema con la solicitud AJAX:', status, error);
        }
      });
    }
    </script>
   

</body>


</html>